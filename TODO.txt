-Work on craft (very high chance that most craft will be vanilla json files)
-upgrade: sprinkler: use water to prevent burning, solidify lava, damage "fire" mobs, water farmland

-common buttons: applicable to all gui, allow switching of guis
-new blocks for the dimension
-crafts
-Actions gui (facultative? will probably not be done after a while)

-guardian upgrade: consume rf to shoot guardian laser to entities close to the holder and to the eye (always exclude owner, white list by mob type and player name)
-projectile absorber: consume rf to catch projectiles that aren't sent by the holder or owner (white list allowed projectiles to go through)
-boost upgrade: repurpose the firework part of the elytra upgrade, if elytra is equiped, easy elytra + firework. If no elytra and in water/rain, do a trident spin attack. If no elytra and no water, temporary speed + jump boost + fall absorbtion

-see how entities/the player interact with the world to create the functions of the ghost hand (for player, might have to simulate key presses, for entities, might have to inject AI goals)

-pillars can be upgraded to player pillar (access to a single slot of the player inventory)
-pillars can be upgraded (like barrels/drawers) to contain more items
-player pillars can be automated using redstone (redstone power on 1 axis select the line/belt/armor/extra inventory, redstont on the other axis selects the column)

-similar to crystals and pillars, ponds store fluids inside the bag, which one is used for input is random, which one is used for output is selectable from the bag (or we could do the last one that received a redstone signal)

-we could add a mode linked to a redstone block (adding the block inside the bag unlocks the mode) which allow the bag user to send redstone signals selecting the mode and on right clic open a radial menu to change the redtone signal (0-15, 16 radials? might be a little much)

-finish those goddamned models and guis (please, for the love of god, finish the settings/widget system)
-btw: you might have to rethink the guis entirely, swallow up your pride and go back to the standard way of doing it (one screen for one container) (you can keep the good parts tho and make SimpleContainer and SimpleContainerScreen into abstract BaseContainer and abstract BaseScreen)

-block to move the bag (use redstone on the cardinals to move, might be able to move the holding entity, should prevent the bag from falling)

(only when all else is finished, get back on track you dofus)
->proto pearl branch:
proto pearl (when consumed/eaten) will have a random effect in the following list:
+change your size (half or double for 1 minute, potion effect)
+throw a standard enderpearl
+summon an ender mite

->size pearl branch:
size pearl (stabilized proto pearl in size mode) will change your size when consumed
-halve your size if you are sneaking (limited to 2 times or 1/2 of a block height)
-double your size if you are standing (limited to 2 times or 8 blocks height)

-----------------------------------------------------------------------
TODO ADDITION EDITION:
-----------------------------------------------------------------------
add item ticking behavior to all the slots in the bag (probably should be an upgrade) (quick and dirty implementation done)
shit/double click behavior for fluid containers (double click a fluid slot try to fill the first valid item fluid container and grab it, shift click on a fluid container that is empty or full tries to fill or empty it)
add white/blacklist support for time distortion upgrade (accepts position/name/registry for te, name/registry for entities) (done in the config, need to also add in settings)
add documentation (book/tooltips/UI text) (might look into Patchouli) (might NOT look into patchouli and do my own thing as a mode for the bag)
add back the 'player pillar' features + new features: energy can be inserted/removed (from items in the user inventory), xp can be drained in liquid form, xp, water, milk and lava can be pumped in the player (for now, only pumping out is ready, missing pumping in, might look into creating a compat with tinker to inject entities with lava/blazing blood to extract fluids)
finish the WII block (fluids) (fluids: drain/place fluids, no interaction with player)
almost finished --- add a new block placeable outside the bag to access the bag as a block (proxy) (allowing interactions with the inventory, tanks and batteries of the bag. note: interaction is passive, needs modded conduits/hoppers to work) (low tier: need the bag inside the block, high tier: bound to a bag)

-----------------------------------------------------------------------
TODO DEBUG EDITION:
-----------------------------------------------------------------------
fix fluid render (tank)
rework shift click (duplication glitch, not working, etc...) for almost all containers
fix sleeping in the bag not working with other mods adding dimensions (might need to hack something)
finish those god-damn UI
finish modeling/texturing
look into sync bag and TE config in better ways (and maybe test for hacks/invalid values' server side)
use 'Flight Recorder' and 'Coverage' to test how much the mod impact the performances of the game (RIP bag gateway renderers, too heavy)
test against other mods/throw in a modpack - currently tested against enigmatica 6 for 1.16.5, two major bugs fixed with minning gadget and transport
test/balance upgrades and crafts (early, mid, late game, again the best way is playing on a modpack), currently crafts and default values doesn't feel right

FIXED:
tick lag due to bag updating holder position too often
tick lag due to mode change dirtying world data
concurrent change error in ticking entities holding bags (the list of entities might grow while processed, breaking iterators)

-----------------------------------------------------------------------
TODO REWORK EDITION:
-----------------------------------------------------------------------
less magic, more technic:
pillar -> slot block (renders in world with slot texture on all faces, rendering the slot content),
fountain -> tank block (renders in world with the tank texture, rendering the fluid inside, show if it is the one selected, if the block is powered it will be selected)
crystal -> battery (renders in world with evolving texture to represent fullness)
brain -> watcher
ghost hand -> performer (name not final, may use 'actor' instead)
player pillar -> bag user block
eye -> remove entirely
gateway -> remove entirely
PARTIALLY DONE (made a huge difference in tested modpacks, but now there is a bunch of bugs, particularly when trying to exit the bag but the bag entity is inside the bag) user tracking -> need to be reworked to prevent server save spam on entity moving (instead of storing position in the save, only store the entity uuid holding the bag and query this entity to get the bag position, but doing so might make the paradox upgrade dangerous, since leaving the bag would place the entities back in the bag, we could add information in subroomdata to have a default output if the bag is inside itself)
PARTIALLY DONE (minor difference in tested modpacks, but now there is a desync when joining world, the server probably does not send the persistent data to the client) mode switch -> same as user tracking, might go back to mode being stored on item itself, or stored on the player?
add new upgrade/mode to link inventories/tanks/batteries from other mods to the bag (very end game)
obviously, because of all the changes/renaming above, redo tutorial and book
we could add the ability for some blocks (slot, tank and battery) to be added to a bag without entering it, by right-clicking the block on the bag, allowing us to put the entering of the bag in the mid-game and keep the bag early game

data stored on players is not sync client side on connection: (quick fix: register an event on player logging that override the persistent data via a packet from the server)
-modes get desync
-if connecting inside a bag, might result in an impossibility to exit the bag

possible reasons the tracking of the bag fails:
-the bag is inside a non ticking inventory (chest, network, etc...)
-the bag is inside a proxy
-the bag is inside itself (paradox upgrade, creative TP)
-the bag is equipped by a non player entity and this entity is not in a loadded chunk

solution:
entering the bag (via proxy or not) should store the last valid position of the bag inside the entity
this data should only be used if we can't find a valid bag or forced if entering via proxy
an if everything else fails, teleport the player to it's bed (if outside of the bag) or at spawn